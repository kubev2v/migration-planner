// Package v1alpha1 provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package v1alpha1

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
	externalRef0 "github.com/kubev2v/migration-planner/api/v1alpha1"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "../openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}

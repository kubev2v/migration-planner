-- +goose Up
-- +goose StatementBegin
CREATE TABLE zed_token (
    id SMALLINT PRIMARY KEY,
    token TEXT
);

CREATE TABLE relationships (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    relation_id VARCHAR(100) NOT NULL,
    assessment_id VARCHAR(255) NOT NULL,
    timestamp TIMESTAMP DEFAULT NOW(),
    relation_type VARCHAR(50) NOT NULL,
    subject_id VARCHAR(255) NOT NULL,
    subject_type VARCHAR(50) NOT NULL
);

CREATE INDEX relationship_id ON relationships (id, relation_id);
-- +goose StatementEnd

-- +goose Down
-- +goose StatementBegin
DROP TABLE zed_token;
DROP TABLE relationships;
DROP INDEX relationship_id;
-- +goose StatementEnd

{{- /*
Power State Counts Query Template - Returns VM power state distribution.

Template Parameters:
  - ClusterFilter: filter by cluster name
*/ -}}
SELECT "Powerstate" AS state, COUNT(*) AS count
FROM vinfo
WHERE 1=1
{{- if .ClusterFilter }} AND "Cluster" = '{{.ClusterFilter}}'{{end}}
GROUP BY "Powerstate";
